<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>La guía de la monografía exitosa</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f4f7f6;
            color: #333;
            line-height: 1.6;
        }
        .container {
            max-width: 900px;
            margin: 20px auto;
            background-color: #ffffff;
            padding: 30px 40px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
            border-bottom: 2px solid #3498db;
            padding-bottom: 15px;
        }
        h2 {
            color: #34495e;
            margin-top: 40px;
            margin-bottom: 20px;
            font-size: 1.8em;
        }
        h3 {
            color: #2980b9;
            margin-top: 30px;
            font-size: 1.4em;
        }
        .instructions {
            background-color: #ecf0f1;
            padding: 15px;
            border-left: 5px solid #3498db;
            margin-bottom: 30px;
            border-radius: 5px;
        }
        .step {
            background-color: #fcfcfc;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }
        .step-content label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #555;
        }
        .step-content textarea {
            width: calc(100% - 20px);
            min-height: 80px;
            padding: 10px;
            margin-bottom: 15px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 1em;
            box-sizing: border-box; /* Ensures padding doesn't increase width */
            resize: vertical; /* Allow vertical resizing */
        }
        .step-content ul {
            list-style: disc inside;
            padding-left: 20px;
        }
        .step-content ul li {
            margin-bottom: 5px;
        }
        button {
            background-color: #27ae60;
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1.1em;
            transition: background-color 0.3s ease;
            margin-top: 20px;
            display: block; /* Make button take full width if needed, or center it */
            margin-left: auto;
            margin-right: auto;
        }
        button:hover {
            background-color: #229954;
        }
        button.add-item-btn {
            background-color: #3498db;
            padding: 8px 15px;
            font-size: 0.9em;
            display: inline-block;
            margin-top: 5px;
            margin-left: 0;
            margin-right: 0;
        }
        button.add-item-btn:hover {
            background-color: #2980b9;
        }
        button.toggle-section-btn {
            background-color: #e67e22; /* Naranja para toggle */
            padding: 10px 20px;
            font-size: 1em;
            margin-top: 10px;
            margin-bottom: 20px;
        }
        button.toggle-section-btn:hover {
            background-color: #d35400;
        }

        .copy-feedback {
            display: none;
            background-color: #d4edda;
            color: #155724;
            padding: 10px 20px;
            border-radius: 5px;
            margin-top: 15px;
            text-align: center;
            font-weight: bold;
        }
        #finalProject {
            background-color: #e8f5e9;
            border: 1px solid #a8d5b1;
            border-radius: 8px;
            padding: 25px;
            margin-top: 40px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            text-align: center; /* Centrar el botón */
        }
        /* Estilo para el div con contenteditable */
        #finalOutput {
            width: calc(100% - 20px);
            min-height: 500px;
            padding: 15px;
            border: 1px solid #b2dfdb;
            border-radius: 5px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            font-size: 1em;
            background-color: #f0fdfc;
            color: #004d40;
            resize: vertical;
            margin-top: 15px;
            text-align: left;
            overflow-y: auto; /* Para scroll si el contenido es largo */
        }
        /* Asegurar que las negritas se vean dentro del contenteditable div */
        #finalOutput strong {
            font-weight: bold;
        }
        /* Estilo para los títulos de capítulo dentro del textarea */
        .step-content ul li textarea[id$="_titulo"] {
            font-weight: bold;
            min-height: 30px;
            margin-bottom: 5px;
        }

        #objetivosEspecificosContainer, #bibliografiaContainer, #chapterInputsContainer, #singleSectionInputContainer {
            margin-top: 10px;
        }
        .development-option {
            margin-bottom: 15px;
            display: flex; /* Usar flexbox para alinear radio y label */
            align-items: center; /* Centrar verticalmente */
            gap: 8px; /* Espacio entre el radio y el label */
        }
        .development-option input[type="radio"] {
            margin: 0; /* Eliminar margen predeterminado */
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>LA GUÍA DE LA MONOGRAFÍA EXITOSA: </h1>
 <h2>Tu proyecto paso a paso</h2>
        <div class="instructions">
            <p>¡Bienvenido/a a tu hoja de ruta hacia una monografía brillante! Esta guía te orientará a través de cada etapa crucial, transformando ideas en un proyecto sólido.</p>
            <p><strong>Instrucciones Generales:</strong></p>
            <ol>
                <li>Lee cada paso y su explicación detallada.</li>
                <li>Responde a las preguntas en el espacio indicado. Los **ejemplos** te ayudarán a entender qué tipo de información se espera; si dejas un campo vacío, el ejemplo se incluirá automáticamente en el resultado final para que siempre tengas una referencia.</li>
                <li>Utiliza los botones **"Agregar..."** para añadir más ítems en las secciones que lo permitan, o **"Ocultar/Mostrar..."** para la sección de Metodología, según lo necesites.</li>
                <li>Cuando hayas completado todos los pasos, desplázate hasta el final y haz clic en "Generar y Copiar Proyecto Completo". Todas tus respuestas se articularán en una propuesta coherente, lista para ser pegada en tu documento.</li>
                <li><strong>Nota sobre el formato:</strong> El área de resultado final te mostrará el texto con **negritas** y formato de lista. Al copiar el contenido y pegarlo en un editor de texto (como Microsoft Word, Google Docs o un editor Markdown), este formato se mantendrá.</li>
                <li>¡Disfruta el proceso y la construcción de tu monografía!</li>
            </ol>
            <div class="copy-feedback" id="copyFeedback"></div>
        </div>

        <!-- Paso 1 -->
        <div class="step" id="step1">
            <h3>Paso 1: La chispa inicial – Delimitando tu universo</h3>
            <p>Este es el punto de partida fundamental de toda investigación. Aquí establecerás el alcance de tu estudio, transformando una idea amplia en una pregunta de investigación precisa y manejable.</p>
            <p><strong>Explicación:</strong></p>
            <ul>
                <li><strong>Tema general:</strong> el área de conocimiento o campo de estudio que te interesa.</li>
                <li><strong>Tema delimitado:</strong> una porción específica y acotada de ese tema general. Crucial para la viabilidad de tu monografía.</li>
                <li><strong>Problema/Pregunta de investigación:</strong> el interrogante central que tu monografía intentará responder. Debe ser claro, conciso, relevante y, sobre todo, investigable.</li>
            </ul>
            <div class="step-content">
                <label for="temaGeneral1">1. Mi tema general (amplio):</label>
                <textarea id="temaGeneral1" placeholder="Ej: La evolución de la inteligencia artificial y su impacto social"></textarea>

                <label for="temaDelimitado1">2. Mi tema delimitado (específico y manejable):</label>
                <textarea id="temaDelimitado1" placeholder="Ej: El impacto de los modelos de lenguaje grandes (LLMs) en la educación superior en el período 2020-2023"></textarea>

                <label for="preguntaInvestigacion1">3. Mi problema/pregunta de investigación (la pregunta central):</label>
                <textarea id="preguntaInvestigacion1" placeholder="Ej: ¿De qué manera los LLMs han alterado los métodos de enseñanza y aprendizaje en las universidades latinoamericanas entre 2020 y 2023?"></textarea>
            </div>
        </div>

        <!-- Paso 2 -->
        <div class="step" id="step2">
            <h3>Paso 2: El faro – Estableciendo tus objetivos</h3>
            <p>Una vez que tienes claro *qué* vas a investigar, necesitas definir *para qué* lo harás. Tus objetivos son las metas que te propones alcanzar con tu trabajo monográfico.</p>
            <p><strong>Explicación:</strong></p>
            <ul>
                <li><strong>Objetivo General:</strong> El propósito principal y más amplio de tu investigación. Responde directamente al "para qué" de tu problema. Se formula con un verbo en infinitivo.</li>
                <li><strong>Objetivos Específicos:</strong> Los pasos concretos, medibles y secuenciales que te permitirán alcanzar el objetivo general. Se formulan con verbos en infinitivo.</li>
            </ul>
            <div class="step-content">
                <label for="objetivoGeneral2">1. Mi objetivo general:</label>
                <textarea id="objetivoGeneral2" placeholder="Ej: Analizar el impacto de los modelos de lenguaje grandes (LLMs) en los métodos de enseñanza y aprendizaje de la educación superior latinoamericana durante el período 2020-2023, con el fin de identificar desafíos y oportunidades."></textarea>

                <label>2. Mis objetivos específicos:</label>
                <div id="objetivosEspecificosContainer">
                    <textarea class="objective-input" placeholder="Ej: a) Describir las principales herramientas de LLMs adoptadas en la educación superior latinoamericana."></textarea>
                    <textarea class="objective-input" placeholder="Ej: b) Evaluar las percepciones de docentes y estudiantes sobre la integración de LLMs en el proceso educativo."></textarea>
                    <textarea class="objective-input" placeholder="Ej: c) Proponer recomendaciones para una implementación ética y efectiva de LLMs en contextos universitarios."></textarea>
                </div>
                <button type="button" class="add-item-btn" onclick="addObjectiveField()">Agregar otro objetivo</button>
            </div>
        </div>

        <!-- Paso 3 -->
        <div class="step" id="step3">
            <h3>Paso 3: La justificación – ¿Por qué importa?</h3>
            <p>En esta sección, debes argumentar y persuadir al lector (o a tu tutor) sobre la relevancia, pertinencia e importancia de tu monografía.</p>
            <p><strong>Explicación:</strong></p>
            <ul>
                <li><strong>Justificación:</strong> Explica por qué tu investigación es necesaria y qué aportará al campo de estudio o a la sociedad. Considera la relevancia teórica, práctica, social y/o metodológica.</li>
            </ul>
            <div class="step-content">
                <label for="justificacion3">1. Mi justificación (mínimo 3-5 líneas):</label>
                <textarea id="justificacion3" placeholder="Ej: Esta monografía es relevante porque el rápido avance de los LLMs está transformando el panorama educativo global, y es crucial comprender cómo estas tecnologías específicas están siendo adoptadas e impactando la educación superior en América Latina. Aportará una perspectiva regional sobre los desafíos y oportunidades, ofreciendo información valiosa para formuladores de políticas educativas, instituciones universitarias, docentes y estudiantes interesados en la integración tecnológica ética y efectiva."></textarea>
            </div>
        </div>

        <!-- Paso 4 -->
        <div class="step" id="step4">
            <h3>Paso 4: El mapa teórico – Construyendo tus cimientos</h3>
            <p>Ninguna investigación surge de la nada. El marco teórico y los antecedentes son el fundamento sobre el que construirás tu monografía.</p>
            <p><strong>Explicación:</strong></p>
            <ul>
                <li><strong>Marco teórico:</strong> las teorías, modelos, conceptos y paradigmas que sustentan tu investigación y te ayudarán a interpretar tus datos.</li>
                <li><strong>Antecedentes:</strong> estudios, investigaciones o trabajos previos sobre tu tema o temas relacionados.</li>
            </ul>
            <div class="step-content">
                <label for="conceptosClave4">1. Conceptos clave o teorías principales que sustentarán mi investigación:</label>
                <textarea id="conceptosClave4" placeholder="Ej: Inteligencia rtificial, Modelos de Lenguaje Grandes (LLMs), Educación Superior, Tecnologías Educativas, Pedagogía Digital, Ética en IA."></textarea>

                <label for="antecedentesRelevantes4">2. Algunos antecedentes relevantes (estudios o autores previos que abordaron temas similares):</label>
                <textarea id="antecedentesRelevantes4" placeholder="Ej: Trabajos sobre la curva de adopción de tecnología en educación (Rogers), estudios sobre la integración de IA en aulas universitarias pre-LLMs, informes de UNESCO o bancos de desarrollo sobre digitalización educativa en América Latina."></textarea>
            </div>
        </div>

        <!-- Paso 5 (Metodología - Ahora opcional) -->
        <button type="button" class="toggle-section-btn" id="toggleMethodologyBtn" onclick="toggleMethodologySection()">Ocultar Metodología</button>
        <div class="step" id="step5_methodology">
            <h3>Paso 5: La brújula – Definiendo tu metodología</h3>
            <p>Describe el camino que seguirás para recolectar, procesar y analizar la información. Es fundamental para asegurar la validez y fiabilidad de tus resultados.</p>
            <p><strong>Explicación:</strong></p>
            <ul>
                <li><strong>Tipo de investigación:</strong> naturaleza general de tu estudio (descriptiva, exploratoria, histórica, de caso, etc.).</li>
                <li><strong>Enfoque:</strong> Si tu investigación es cualitativa, cuantitativa o mixta.</li>
                <li><strong>Principales instrumentos o técnicas de recolección de datos:</strong> las herramientas y procedimientos específicos para obtener información.</li>
            </ul>
            <div class="step-content">
                <label for="tipoInvestigacion5">1. Tipo de investigación (ej. descriptiva, histórica, de caso, etc.):</label>
                <textarea id="tipoInvestigacion5" placeholder="Ej: descriptiva y exploratoria."></textarea>

                <label for="enfoque5">2. Enfoque (cualitativo, cuantitativo o mixto):</label>
                <textarea id="enfoque5" placeholder="Ej: Mixto (predominantemente cualitativo con elementos cuantitativos para contextualización)."></textarea>

                <label for="instrumentosRecoleccion5">3. Principales instrumentos o técnicas de recolección de datos (ej. análisis de documentos, encuestas, entrevistas, observación):</label>
                <textarea id="instrumentosRecoleccion5" placeholder="Ej: Encuestas a docentes y estudiantes, entrevistas semiestructuradas a expertos en tecnología educativa y análisis de documentos (planes de estudio, políticas universitarias, publicaciones sobre LLMs)."></textarea>
            </div>
        </div>

        <!-- Paso 6: Estructura preliminar de contenido (Ahora con opción de capítulos o apartado único) -->
        <div class="step" id="step6">
            <h3>Paso 6: El arquitecto – Estructura preliminar de contenido</h3>
            <p>Diseña la "arquitectura" de tu monografía. Este es el borrador de tu índice para el "Desarrollo", una hoja de ruta lógica para tu trabajo.</p>
            <p><strong>Explicación:</strong></p>
            <ul>
                <li><strong>Estructura preliminar del desarrollo:</strong> un esquema detallado de los capítulos o secciones principales que conformarán el "Desarrollo" de tu monografía. Decide si esta sección se dividirá en capítulos temáticos o será un único apartado.</li>
            </ul>
            <div class="step-content">
                <label>¿Cómo se estructurará el desarrollo de tu monografía?</label>
                <div class="development-option">
                    <input type="radio" id="devChapters" name="developmentStructure" value="chapters" checked onchange="toggleChapterInput()">
                    <label for="devChapters">Dividido en capítulos temáticos</label>
                </div>
                <div class="development-option">
                    <input type="radio" id="devSingle" name="developmentStructure" value="single" onchange="toggleChapterInput()">
                    <label for="devSingle">Un único apartado (ej. Discusión, Análisis)</label>
                </div>

                <div id="chapterInputsContainer">
                    <p><strong>Capítulos temáticos (mínimo 3):</strong></p>
                    <label for="capitulo1_titulo">1. Título del primer capítulo (del desarrollo):</label>
                    <textarea id="capitulo1_titulo" rows="1" placeholder="Ej: Fundamentos de los Modelos de Lenguaje Grandes (LLMs)"></textarea>
                    <label for="capitulo1_descripcion">Descripción breve:</label>
                    <textarea id="capitulo1_descripcion" placeholder="Ej: Conceptos clave de LLMs, tipos, funcionamiento básico y su evolución."></textarea>

                    <label for="capitulo2_titulo">2. Título del segundo capítulo (del desarrollo):</label>
                    <textarea id="capitulo2_titulo" rows="1" placeholder="Ej: Integración y Percepción de LLMs en la Educación Superior Latinoamericana"></textarea>
                    <label for="capitulo2_descripcion">Descripción breve:</label>
                    <textarea id="capitulo2_descripcion" placeholder="Ej: Casos de uso actuales, análisis de encuestas a docentes y estudiantes, beneficios y desafíos."></textarea>

                    <label for="capitulo3_titulo">3. Título del tercer capítulo (del desarrollo):</label>
                    <textarea id="capitulo3_titulo" rows="1" placeholder="Ej: Implicaciones Éticas y Pedagógicas de los LLMs"></textarea>
                    <label for="capitulo3_descripcion">Descripción breve:</label>
                    <textarea id="capitulo3_descripcion" placeholder="Ej: Análisis de sesgos, plagio, equidad, rol del docente, y nuevas metodologías de evaluación."></textarea>
                    <button type="button" class="add-item-btn" onclick="addChapterField()">Agregar otro capítulo</button>
                </div>

                <div id="singleSectionInputContainer" style="display: none;">
                    <label for="singleSection_titulo">Título del apartado principal del desarrollo:</label>
                    <textarea id="singleSection_titulo" rows="1" placeholder="Ej: Análisis y Discusión de Resultados"></textarea>
                    <label for="singleSection_descripcion">Descripción breve del contenido de este apartado:</label>
                    <textarea id="singleSection_descripcion" placeholder="Ej: Este apartado consolidará el marco teórico, los antecedentes, la metodología y el análisis de datos en una discusión integrada sobre el impacto de los LLMs."></textarea>
                </div>
            </div>
        </div>

        <!-- Paso 7: Primeras ideas para las conclusiones -->
        <div class="step" id="step7_conclusions">
            <h3>Paso 7: Primeras ideas para las conclusiones</h3>
            <p>Pensar en las conclusiones al inicio te ayuda a mantener el enfoque y a dirigir tu investigación hacia los resultados deseados.</p>
            <p><strong>Explicación:</strong></p>
            <ul>
                <li><strong>Conclusiones preliminares:</strong> un esbozo o anticipación de los principales hallazgos, respuestas clave a tu pregunta de investigación, o las implicaciones más importantes que esperas derivar de tu estudio.</li>
            </ul>
            <div class="step-content">
                <label for="preliminarConclusiones">1. Mis primeras ideas para las conclusiones (principales hallazgos esperados o implicaciones):</label>
                <textarea id="preliminarConclusiones" placeholder="Ej: Los LLMs han impactado significativamente la personalización del aprendizaje y la evaluación formativa, pero también han generado desafíos éticos y de equidad en el acceso a la tecnología. Además, se anticipa la necesidad de políticas institucionales claras para su uso."></textarea>
            </div>
        </div>

        <!-- Paso 8: La biblioteca inicial – Primeras fuentes clave -->
        <div class="step" id="step8_bibliografia">
            <h3>Paso 8: La biblioteca inicial – Primeras fuentes clave</h3>
            <p>Identifica las fuentes bibliográficas esenciales para un punto de partida sólido.</p>
            <p><strong>Explicación:</strong></p>
            <ul>
                <li><strong>Bibliografía preliminar:</strong> un listado inicial de las obras más relevantes (libros, artículos, tesis, etc.) que has identificado como fundamentales. Sirve para delimitar el campo y tener una base para futuras búsquedas.</li>
            </ul>
            <div class="step-content">
                <label>1. Fuentes clave iniciales (libros, artículos, sitios web confiables, etc. con su título y autor):</label>
                <div id="bibliografiaContainer">
                    <textarea class="bibliography-input" placeholder="Ej: Russell, S. & Norvig, P. (2010). Artificial Intelligence: A Modern Approach. Pearson."></textarea>
                    <textarea class="bibliography-input" placeholder="Ej: UNESCO. (2021). IA y educación: Guía para la formulación de políticas. UNESCO Publishing."></textarea>
                    <textarea class="bibliography-input" placeholder="Ej: Susskind, R., & Susskind, D. (2015). The Future of the Professions: How Technology Will Transform the Work of Human Experts. Oxford University Press."></textarea>
                </div>
                <button type="button" class="add-item-btn" onclick="addBibliographyField()">Agregar otra fuente</button>
            </div>
        </div>

        <!-- Sección de proyecto final -->
        <div id="finalProject">
            <h2>TU PROYECTO DE MONOGRAFÍA: el resultado final</h2>
            <p>¡Excelente trabajo! Has construido los cimientos de tu monografía. Haz clic en el botón de abajo para generar tu propuesta completa.</p>
            <button onclick="generateAndCopyFullProject()">Generar y Copiar Proyecto Completo</button>
            <div id="finalOutput" contenteditable="true">
                <!-- El contenido se generará aquí. Las negritas se verán directamente. -->
                Tu proyecto de monografía aparecerá aquí después de hacer clic en 'Generar y copiar proyecto completo'. Podrás copiar este texto enriquecido para pegarlo en tu documento.
            </div>
        </div>

    </div>

    <script>
        const copyFeedbackDiv = document.getElementById('copyFeedback');
        let objectiveCounter = 3; // Start after initial 3
        let bibliographyCounter = 3; // Start after initial 3
        let chapterCounter = 3; // Start after initial 3 chapters

        function showFeedback(message) {
            copyFeedbackDiv.textContent = message;
            copyFeedbackDiv.style.display = 'block';
            setTimeout(() => {
                copyFeedbackDiv.style.display = 'none';
            }, 3000); // Ocultar el mensaje después de 3 segundos
        }

        // Helper function to copy formatted content from a div
        async function copyFormattedContent(divId) {
            const div = document.getElementById(divId);
            if (!div) return;

            try {
                const htmlContent = div.innerHTML;
                const blob = new Blob([htmlContent], { type: 'text/html' });
                const item = new ClipboardItem({ 'text/html': blob });
                await navigator.clipboard.write([item]);
                showFeedback('✅ ¡Proyecto completo copiado al portapapeles (con formato)!');
            } catch (err) {
                console.error("Error copying rich text:", err);
                try {
                    const textContent = div.innerText || div.textContent;
                    await navigator.clipboard.writeText(textContent);
                    showFeedback('✅ ¡Proyecto completo copiado como texto plano!');
                } catch (fallbackErr) {
                    console.error("Fallback plain text copy failed:", fallbackErr);
                    showFeedback('❌ Error al copiar. Por favor, selecciona el texto en el recuadro y cópialo manualmente.');
                }
            }
        }

        // Helper function to get value from textarea, or its example placeholder
        function getValueOrExample(elementId) {
            const element = document.getElementById(elementId);
            if (!element) return "";
            const userValue = element.value.trim();
            if (userValue !== '') {
                return userValue;
            }
            const placeholder = element.placeholder.trim();
            // Only return example if it's an actual example, not just "(Opcional)"
            if (placeholder.startsWith("Ej:") && !placeholder.includes("(Opcional)")) {
                return placeholder.substring(placeholder.indexOf(":") + 2).trim(); // Remove "Ej:" prefix
            }
            return ""; // Return empty string if no user input and no relevant example
        }

        // Function to get all values from dynamic textareas
        function getAllValuesByClassName(containerId, className) {
            const container = document.getElementById(containerId);
            if (!container) return [];
            const textareas = container.querySelectorAll(`textarea.${className}`);
            const values = [];
            textareas.forEach(textarea => {
                const userValue = textarea.value.trim();
                if (userValue !== '') {
                    values.push(userValue);
                } else {
                    const placeholder = textarea.placeholder.trim();
                    if (placeholder.startsWith("Ej:") && !placeholder.includes("(Opcional)")) {
                        values.push(placeholder.substring(placeholder.indexOf(":") + 2).trim());
                    }
                }
            });
            return values;
        }

        // Dynamic Field Addition Functions
        function addObjectiveField() {
            objectiveCounter++;
            const container = document.getElementById('objetivosEspecificosContainer');
            const newTextarea = document.createElement('textarea');
            newTextarea.className = 'objective-input';
            newTextarea.placeholder = `Ej: Otro objetivo específico.`;
            container.appendChild(newTextarea);
            newTextarea.focus();
        }

        function addBibliographyField() {
            bibliographyCounter++;
            const container = document.getElementById('bibliografiaContainer');
            const newTextarea = document.createElement('textarea');
            newTextarea.className = 'bibliography-input';
            newTextarea.placeholder = `Ej: (Opcional) Fuente adicional ${bibliographyCounter}. Autor, Título.`;
            container.appendChild(newTextarea);
            newTextarea.focus();
        }

        function addChapterField() {
            chapterCounter++;
            const container = document.getElementById('chapterInputsContainer');
            const newDiv = document.createElement('div');
            newDiv.innerHTML = `
                <label for="capitulo${chapterCounter}_titulo">${chapterCounter}. Título del Capítulo (del Desarrollo):</label>
                <textarea id="capitulo${chapterCounter}_titulo" rows="1" placeholder="Ej: Título del Capítulo ${chapterCounter}"></textarea>
                <label for="capitulo${chapterCounter}_descripcion">Descripción breve:</label>
                <textarea id="capitulo${chapterCounter}_descripcion" placeholder="Ej: Contenido resumido del Capítulo ${chapterCounter}."></textarea>
            `;
            container.appendChild(newDiv);
            document.getElementById(`capitulo${chapterCounter}_titulo`).focus();
        }

        // Toggle Methodology Section
        function toggleMethodologySection() {
            const methodologyStep = document.getElementById('step5_methodology');
            const toggleButton = document.getElementById('toggleMethodologyBtn');
            if (methodologyStep.style.display === 'none') {
                methodologyStep.style.display = 'block';
                toggleButton.textContent = 'Ocultar Metodología';
            } else {
                methodologyStep.style.display = 'none';
                toggleButton.textContent = 'Mostrar Metodología';
            }
        }

        // Toggle Chapter/Single Section Input
        function toggleChapterInput() {
            const useChapters = document.getElementById('devChapters').checked;
            document.getElementById('chapterInputsContainer').style.display = useChapters ? 'block' : 'none';
            document.getElementById('singleSectionInputContainer').style.display = useChapters ? 'none' : 'block';
        }

        // Main function to generate and copy the full project
        function generateAndCopyFullProject() {
            const temaGeneral = getValueOrExample('temaGeneral1');
            const temaDelimitado = getValueOrExample('temaDelimitado1');
            const preguntaInvestigacion = getValueOrExample('preguntaInvestigacion1');
            const objetivoGeneral = getValueOrExample('objetivoGeneral2');
            const justificacion = getValueOrExample('justificacion3');
            const conceptosClave = getValueOrExample('conceptosClave4');
            const antecedentesRelevantes = getValueOrExample('antecedentesRelevantes4');
            const preliminarConclusiones = getValueOrExample('preliminarConclusiones');

            const specificObjectives = getAllValuesByClassName('objetivosEspecificosContainer', 'objective-input');
            const bibliographySources = getAllValuesByClassName('bibliografiaContainer', 'bibliography-input');

            // Build Objectives HTML for the result
            let objectivesHtmlList = '';
            if (specificObjectives.length > 0) {
                specificObjectives.forEach(obj => {
                    objectivesHtmlList += `    <li>${obj}</li>\n`;
                });
            } else {
                objectivesHtmlList = '<li>[Ningún objetivo específico ingresado]</li>';
            }

            // Build Bibliography HTML for the result
            let bibliographyHtmlList = '';
            if (bibliographySources.length > 0) {
                bibliographySources.forEach(source => {
                    bibliographyHtmlList += `    <li>${source}</li>\n`;
                });
            } else {
                bibliographyHtmlList = '<li>[Ninguna fuente preliminar ingresada]</li>';
            }

            // Check if Methodology section is visible
            const methodologyStepVisible = document.getElementById('step5_methodology').style.display !== 'none';

            let methodologySectionInDevelopment = '';
            if (methodologyStepVisible) {
                methodologySectionInDevelopment = `
                    <h4>Método de Investigación</h4>
                    <ul>
                        <li><strong>Tipo de Investigación:</strong> ${getValueOrExample('tipoInvestigacion5')}</li>
                        <li><strong>Enfoque:</strong> ${getValueOrExample('enfoque5')}</li>
                        <li><strong>Principales Instrumentos o Técnicas de Recolección de Datos:</strong> ${getValueOrExample('instrumentosRecoleccion5')}</li>
                    </ul>
                `;
            }

            // Build Development section content based on user choice
            let developmentContentHtml = '';
            const useChapters = document.getElementById('devChapters').checked;

            if (useChapters) {
                const chapterTitles = [];
                const chapterDescriptions = [];
                // Get all chapter inputs, including dynamically added ones
                const chapterTextareas = document.querySelectorAll('#chapterInputsContainer textarea[id$="_titulo"]');
                chapterTextareas.forEach(textarea => {
                    const id = textarea.id;
                    const num = id.match(/\d+/)[0]; // Extract number from ID
                    chapterTitles.push(getValueOrExample(`capitulo${num}_titulo`));
                    chapterDescriptions.push(getValueOrExample(`capitulo${num}_descripcion`));
                });

                chapterTitles.forEach((title, index) => {
                    // Only add if title is not empty, allowing for removal of optional empty chapters
                    if (title && title !== "") {
                        developmentContentHtml += `
                            <li><strong>Capítulo ${index + 1}: ${title}</strong><br>
                                (${chapterDescriptions[index]})
                            </li>
                        `;
                    }
                });
                if (developmentContentHtml === '') {
                    developmentContentHtml = `<li>[No se han definido capítulos temáticos. Considere definir al menos tres capítulos o cambiar a un apartado único para el desarrollo.]</li>`;
                }

            } else { // Single section development
                const singleSectionTitulo = getValueOrExample('singleSection_titulo');
                const singleSectionDescripcion = getValueOrExample('singleSection_descripcion');
                developmentContentHtml = `
                    <li><strong>${singleSectionTitulo || "[Título del apartado de Desarrollo]"}</strong><br>
                        (${singleSectionDescripcion || "[Descripción del contenido del apartado de desarrollo]"})
                    </li>
                `;
            }


            // Generate HTML for display in the div
            const htmlOutput = `
                <h2>Propuesta de Monografía: ${temaDelimitado || "Sin Título Provisional"}</h2>

                <p>(Título Provisional: ${temaDelimitado || "Por Definir"})</p>

                <h3>1. Introducción</h3>
                <p>En esta sección se presentará el tema principal del estudio, <strong>${temaDelimitado}</strong>, y se expondrá claramente el problema de investigación: <strong>${preguntaInvestigacion}</strong>. Se detallará el objetivo general: <strong>${objetivoGeneral}</strong>, junto con los objetivos específicos que guiarán la investigación. Además, se justificará la relevancia de este estudio, destacando su importancia y contribuciones esperadas. Finalmente, se describirá la estructura general del trabajo, preparando al lector para el contenido.</p>
                <ul>
                    <li><strong>Tema General:</strong> ${temaGeneral}</li>
                    <li><strong>Objetivos Específicos:</strong>
                        <ul>
                            ${objectivesHtmlList}
                        </ul>
                    </li>
                    <li><strong>Justificación:</strong> ${justificacion}</li>
                </ul>

                <h3>2. Desarrollo</h3>
                <p>Esta sección constituye el cuerpo central de la monografía, donde se profundizará en el análisis del tema. Se presentarán el <strong>Marco Teórico</strong> y los <strong>Antecedentes</strong> que sustentan el estudio:</p>
                <ul>
                    <li><strong>Marco Teórico y Antecedentes:</strong>
                        <ul>
                            <li><strong>Conceptos Clave o Teorías Principales:</strong> ${conceptosClave}</li>
                            <li><strong>Antecedentes Relevantes:</strong> ${antecedentesRelevantes}</li>
                        </ul>
                    </li>
                </ul>
                ${methodologySectionInDevelopment}
                <p>El desarrollo temático principal se abordará a través de:</p>
                <ul>
                    ${developmentContentHtml}
                </ul>

                <h3>3. Conclusiones</h3>
                <p>Este apartado presentará los hallazgos clave de la investigación, dando respuesta a la pregunta de investigación y a los objetivos planteados. Los principales hallazgos esperados incluyen:</p>
                <ul>
                    <li>${preliminarConclusiones}</li>
                </ul>
                <p>Además, se discutirán las implicaciones de los resultados obtenidos y se sugerirán futuras líneas de investigación.</p>

                <h3>4. Bibliografía</h3>
                <p>Listado completo y organizado de todas las fuentes consultadas y citadas a lo largo de la monografía, incluyendo una selección de la bibliografía preliminar utilizada como punto de partida:</p>
                <ul>
                    ${bibliographyHtmlList}
                </ul>
            `.trim();

            document.getElementById('finalOutput').innerHTML = htmlOutput;

            // Copy the formatted content (HTML will be copied)
            copyFormattedContent('finalOutput');
        }

        // Initialize development structure on load
        document.addEventListener('DOMContentLoaded', toggleChapterInput);
    </script>

</body>
</html>
